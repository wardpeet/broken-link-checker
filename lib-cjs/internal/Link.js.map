{"version":3,"file":"Link.js","names":["reasons","_interopRequireWildcard","require","_isurl","_interopRequireDefault","_urlRelation","_Link","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_classPrivateMethodInitSpec","_checkPrivateRedeclaration","add","TypeError","_superPropGet","o","p","_get","_getPrototypeOf","prototype","apply","Reflect","bind","_superPropBase","arguments","length","value","setPrototypeOf","getPrototypeOf","_assertClassBrand","ORIGINAL_URL","exports","RESOLVED_URL","REBASED_URL","REDIRECTED_URL","RESOLVED_BASE_URL","REBASED_BASE_URL","HTML_INDEX","HTML_OFFSET_INDEX","HTML_LOCATION","HTML_SELECTOR","HTML_TAG_NAME","HTML_ATTR_NAME","HTML_ATTRS","HTML_TEXT","HTML_TAG","HTML_BASE_HREF","HTTP_RESPONSE","HTTP_RESPONSE_WAS_CACHED","IS_BROKEN","IS_INTERNAL","IS_SAME_PAGE","WAS_EXCLUDED","BROKEN_REASON","EXCLUDED_REASON","_Link_brand","WeakSet","Link","Map","constructor","link","keys","forEach","key","break","reasonKey","include","exclude","mend","redirect","url","parseURL","_relateWithBase","resolve","base","isURL","href","hash","rebased","includes","undefined","toJSON","fromEntries","Array","from","entries","relation","URLRelation","upTo","HOST","PATH","URL","freeze"],"sources":["../../lib/internal/Link.js"],"sourcesContent":["import * as reasons from \"./reasons\";\nimport isURL from \"isurl\";\nimport URLRelation from \"url-relation\";\n\n\n\nexport const ORIGINAL_URL = \"originalURL\";      // The URL string as it was inputted\nexport const RESOLVED_URL = \"resolvedURL\";      // The `URL`, resolved with `RESOLVED_BASE_URL`\nexport const REBASED_URL = \"rebasedURL\";        // The `URL`, resolved with `REBASED_BASE_URL`\nexport const REDIRECTED_URL = \"redirectedURL\";  // The `URL`, after its last redirection, if any\n\nexport const RESOLVED_BASE_URL = \"resolvedBaseURL\";  // The base `URL`\nexport const REBASED_BASE_URL = \"rebasedBaseURL\";    // The base `URL`, resolved with `HTML_BASE_HREF`\n\nexport const HTML_INDEX = \"htmlIndex\";               // The order in which the link appeared in its document -- out of all links using max-level tag filter\nexport const HTML_OFFSET_INDEX = \"htmlOffsetIndex\";  // Sequential (gap-free) indices for skipped and unskipped links\nexport const HTML_LOCATION = \"htmlLocation\";         // Source code location of the attribute that the link was found within\nexport const HTML_SELECTOR = \"htmlSelector\";         // CSS selector for element in document\nexport const HTML_TAG_NAME = \"htmlTagName\";          // Tag name that the link was found on\nexport const HTML_ATTR_NAME = \"htmlAttrName\";        // Attribute name that the link was found within\nexport const HTML_ATTRS = \"htmlAttrs\";               // All attributes on the element\nexport const HTML_TEXT = \"htmlText\";                 // TextNodes/innerText of the element\nexport const HTML_TAG = \"htmlTag\";                   // The entire tag string\nexport const HTML_BASE_HREF = \"htmlBaseHref\";        // The document's `<base href>` value\n\nexport const HTTP_RESPONSE = \"httpResponse\";                      // The request response\nexport const HTTP_RESPONSE_WAS_CACHED = \"httpResponseWasCached\";  // If the response was from cache\n\nexport const IS_BROKEN = \"isBroken\";        // If the link was determined to be broken or not\nexport const IS_INTERNAL = \"isInternal\";    // If the link is to the same host as its base/document\nexport const IS_SAME_PAGE = \"isSamePage\";   // If the link is to the same page as its base/document\nexport const WAS_EXCLUDED = \"wasExcluded\";  // If the link was excluded due to any filtering\n\nexport const BROKEN_REASON = \"brokenReason\";      // The reason why the link was considered broken, if it indeed is\nexport const EXCLUDED_REASON = \"excludedReason\";  // The reason why the link was excluded from being checked, if it indeed was\n\n\n\nexport default class Link extends Map\n{\n\t/**\n\t * @param {Link} [link]\n\t */\n\tconstructor(link)\n\t{\n\t\tsuper(link);\n\n\t\tif (!(link instanceof Link))\n\t\t{\n\t\t\t// Default values\n\t\t\tkeys.forEach(key => super.set(key, null));\n\t\t}\n\t}\n\n\n\t/**\n\t * Change state to \"broken\" with a reason.\n\t * @param {string} reasonKey\n\t * @returns {Link}\n\t */\n\tbreak(reasonKey)\n\t{\n\t\tif (!(reasonKey in reasons))\n\t\t{\n\t\t\treasonKey = \"BLC_UNKNOWN\";\n\t\t}\n\n\t\tsuper.set(IS_BROKEN, true);\n\t\tsuper.set(BROKEN_REASON, reasonKey);\n\t\tthis.include();\n\t\treturn this;\n\t}\n\n\n\n\t/**\n\t * Change state to \"excluded\" with a reason.\n\t * @param {string} reasonKey\n\t * @returns {Link}\n\t */\n\texclude(reasonKey)\n\t{\n\t\tsuper.set(WAS_EXCLUDED, true);\n\t\tsuper.set(EXCLUDED_REASON, reasonKey);\n\t\treturn this;\n\t}\n\n\n\n\t/**\n\t * Change state to \"not excluded\" and remove any previous reason for being otherwise.\n\t * @returns {Link}\n\t */\n\tinclude()\n\t{\n\t\tsuper.set(WAS_EXCLUDED, false);\n\t\tsuper.set(EXCLUDED_REASON, null);\n\t\treturn this;\n\t}\n\n\n\n\t/**\n\t * Change state to \"not broken\" and remove any previous reason for being otherwise.\n\t * @returns {Link}\n\t */\n\tmend()\n\t{\n\t\tsuper.set(IS_BROKEN, false);\n\t\tsuper.set(BROKEN_REASON, null);\n\t\tthis.include();\n\t\treturn this;\n\t}\n\n\n\t/**\n\t * Assign a redirected URL and change any relative state.\n\t * @param {URL|string} url\n\t * @returns {Link}\n\t */\n\tredirect(url)\n\t{\n\t\tsuper.set(REDIRECTED_URL, parseURL(url));\n\n\t\tthis.#relateWithBase();\n\t\treturn this;\n\t}\n\n\n\n\t/**\n\t * Reassign properties associated with state relative to the link's environment.\n\t */\n\t#relateWithBase()\n\t{\n\t\tconst url = super.get(REDIRECTED_URL) ?? super.get(REBASED_URL);\n\n\t\t// If impossible to determine is linked to same server/etc\n\t\tif (url===null || super.get(RESOLVED_BASE_URL)===null)\n\t\t{\n\t\t\t// Overwrite any previous values\n\t\t\tsuper.set(IS_INTERNAL, null);\n\t\t\tsuper.set(IS_SAME_PAGE, null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Rebased base URL not used because `<base href>` URL could be remote\n\t\t\t// @todo common/careful profile\n\t\t\t// @todo auth shouldn't affect this\n\t\t\tconst relation = new URLRelation(url, super.get(RESOLVED_BASE_URL));\n\n\t\t\tsuper.set(IS_INTERNAL,  relation.upTo(URLRelation.HOST));\n\t\t\tsuper.set(IS_SAME_PAGE, relation.upTo(URLRelation.PATH));\n\t\t}\n\t}\n\n\n\n\t/**\n\t * Produce and assign an absolute URL and change any relative state.\n\t * @param {URL|string|null} [url]\n\t * @param {URL|string|null} [base]\n\t * @returns {Link}\n\t */\n\tresolve(url, base)\n\t{\n\t\tif (url != null)\n\t\t{\n\t\t\t// Parse or clone\n\t\t\tbase = parseURL(base);\n\n\t\t\tif (isURL(url))\n\t\t\t{\n\t\t\t\tsuper.set(ORIGINAL_URL, url.href);\n\t\t\t\tsuper.set(RESOLVED_URL, url);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsuper.set(ORIGINAL_URL, url);\n\t\t\t\tsuper.set(RESOLVED_URL, parseURL(url));\n\t\t\t}\n\n\t\t\tif (base !== null)\n\t\t\t{\n\t\t\t\t// Remove any hash since it's useless in a base -- safe to mutate\n\t\t\t\tbase.hash = \"\";\n\n\t\t\t\tconst rebased = parseURL(super.get(HTML_BASE_HREF), base);\n\n\t\t\t\tsuper.set(REBASED_BASE_URL, rebased ?? base);\n\t\t\t\tsuper.set(RESOLVED_BASE_URL, base);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsuper.set(REBASED_BASE_URL, parseURL(super.get(HTML_BASE_HREF)));\n\t\t\t}\n\n\t\t\tif (super.get(REBASED_BASE_URL) !== null)\n\t\t\t{\n\t\t\t\t// Remove any hash since it's useless in a base -- safe to mutate\n\t\t\t\tsuper.get(REBASED_BASE_URL).hash = \"\";\n\n\t\t\t\tif (super.get(RESOLVED_URL) === null)\n\t\t\t\t{\n\t\t\t\t\tsuper.set(RESOLVED_URL, parseURL(url, super.get(RESOLVED_BASE_URL)));\n\t\t\t\t\tsuper.set(REBASED_URL,  parseURL(url, super.get(REBASED_BASE_URL)));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsuper.set(REBASED_URL, super.get(RESOLVED_URL));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsuper.set(REBASED_URL, super.get(RESOLVED_URL));\n\t\t\t}\n\n\t\t\t// @todo move relation stuff out of this function -- separation of concerns?\n\t\t\tthis.#relateWithBase();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\n\n\t/**\n\t * Assign a value to a supported key.\n\t * @param {symbol} key\n\t * @param {*} value\n\t * @throws {TypeError} unsupported key or undefined value\n\t * @returns {Link}\n\t */\n\tset(key, value)\n\t{\n\t\tif (!keys.includes(key))\n\t\t{\n\t\t\tthrow new TypeError(\"Invalid key\");\n\t\t}\n\t\telse if (value === undefined)\n\t\t{\n\t\t\tthrow new TypeError(\"Invalid value\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn super.set(key, value);\n\t\t}\n\t}\n\n\n\n\t/**\n\t * Produce a key-value object for `JSON.stringify()`.\n\t * @returns {object}\n\t */\n\ttoJSON()\n\t{\n\t\t// @todo https://github.com/tc39/proposal-pipeline-operator\n\t\treturn Object.fromEntries(Array.from(super.entries()));\n\t}\n}\n\n\n\nconst keys =\n[\n\tBROKEN_REASON,\n\tEXCLUDED_REASON,\n\tHTML_ATTR_NAME,\n\tHTML_ATTRS,\n\tHTML_BASE_HREF,\n\tHTML_INDEX,\n\tHTML_LOCATION,\n\tHTML_OFFSET_INDEX,\n\tHTML_SELECTOR,\n\tHTML_TAG,\n\tHTML_TAG_NAME,\n\tHTML_TEXT,\n\tHTTP_RESPONSE,\n\tHTTP_RESPONSE_WAS_CACHED,\n\tIS_BROKEN,\n\tIS_INTERNAL,\n\tIS_SAME_PAGE,\n\tORIGINAL_URL,\n\tREBASED_BASE_URL,\n\tREBASED_URL,\n\tREDIRECTED_URL,\n\tRESOLVED_BASE_URL,\n\tRESOLVED_URL,\n\tWAS_EXCLUDED\n];\n\n\n\n/**\n * Parse or clone a URL.\n * @param {URL|string|null} [url]\n * @param {URL|string|null} [base]\n * @returns {URL|null}\n */\nconst parseURL = (url=null, base) =>\n{\n\tif (url !== null)\n\t{\n\t\ttry\n\t\t{\n\t\t\turl = new URL(url, base);\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\turl = null;\n\t\t}\n\t}\n\n\treturn url;\n};\n\n\n\nObject.freeze(Link);\n"],"mappings":"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","ignoreList":[]}